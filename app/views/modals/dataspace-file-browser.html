<div class="inmodal" ng-class="file-browser-modal">

    <div class="modal-header">
        <button type="button" class="close close-modal-btn" ng-click="cancel()">Ã—</button>
        <h4>{{locationDescription}} File Browser</h4>
        <h5>Browse, Upload files in {{locationDescription}}, Select one file as the variable value</h5>
    </div>

    <div id="files-body" class="modal-body">
        <div>
            <button id="refresh-file-btn" title="{{'Refresh files'|translate}}" class="btn btn-white" ng-click="refreshFiles()">
                <i class="fa fa-repeat"></i>
            </button>
            <button id="new-folder-btn" title="{{'New folder'|translate}}" class="btn btn-white"  ng-click="createFolder()">
                <i class="fa fa fa-plus"></i>
            </button>
            <input type="file" id="selected-upload-file"  onchange="angular.element(this).scope().fileSelected(this.files)" class="hidden" />
            <button id="upload-file-btn" title="{{'Upload a file'|translate}}" class="btn btn-white" ng-click="clickUpload()" ng-disabled="isUploading">
                <i class="fa" ng-class="{'fa-upload':!isUploading, 'fa-spinner fa-pulse':isUploading}"></i>
            </button>
            <button id="delete-file-btn" title="{{'Delete the selected file or folder'|translate}}" class="btn btn-white" ng-click="deleteFile()">
                <i class="fa fa-trash"></i>
            </button>
        </div>
        <br>

        <span class="font-bold m-r-xs">
                {{'Location'|translate}} :
        </span>
        <span><a href="javascript:void(0)" id="sub-path-home-btn" value="" ng-click="enterFilesSubdir($event)">/</a></span>

        <ol class="breadcrumb" style="background-color: transparent; border:none;display: inline-flex;">
            <li class="breadcrumb-item"  ng-repeat="subPath in currentPath.split('/') track by $index" ng-if="subPath"><a href="javascript:void(0)" value="{{currentPath.split('/').slice(0, $index+1).join('/')}}/" ng-click="enterFilesSubdir($event)">{{(subPath.length > 30) ? subPath.substring(0, 30) + " ..." : subPath}}</a></li>
        </ol>
        <br>
        <div id="files-container" slim-scroll box-height="40vh" style="overflow-wrap: break-word;">
            <table class="table table-hover" style="background-color: white; width: 100%; table-layout:fixed;">
                <thead>
                    <th width="35%">Name</th>
                    <th width="15%">Size</th>
                    <th width="20%">Type</th>
                    <th width="30%">Modified</th>
                </thead>
                <tbody id="files-tbody">
                    <tr ng-repeat="dir in directories track by $index">
                        <td  class="file-browser-dir" value="{{currentPath}}{{dir.name}}/" ng-click="switchSelected($event)" ng-dblclick="enterFilesSubdir($event)"> <i class="fa fa-folder-o"> </i> {{dir.name}} </td>
                        <td> </td>
                        <td> Folder </td>
                        <td> {{dir.modified}} </td>
                    </tr>
                    <tr ng-repeat="file in files track by $index">
                        <td  class="file-browser-file" value="{{currentPath}}{{file.name}}" ng-click="switchSelected($event)"> <i class="fa fa-file-o"> </i> {{file.name}} </td>
                        <td> {{file.size}} </td>
                        <td> {{file.type}} </td>
                        <td> {{file.modified}} </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
        <label id="file-browser-error-message" style="color:red;"></label>
    </div>

    <div class="modal-footer">
        <button class="btn btn-white file-browser-select-btn" ng-click="selectFile()" type="button"> {{'Select'|translate}} </button>
        <button class="btn btn-white close-modal-btn" type="button" ng-click="cancel()"> {{'Cancel'|translate}} </button>
    </div>
</div>
